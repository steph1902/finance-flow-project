echo "ğŸ” Running pre-commit validation..."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"

# Run type check
echo "ğŸ“˜ Type Check..."
tsc --noEmit
TYPE_CHECK=$?

if [ $TYPE_CHECK -ne 0 ]; then
  echo "âŒ TypeScript type check failed. Fix type errors before committing."
  exit 1
fi
echo "âœ… Type check passed"

# Run linter
echo ""
echo "ğŸ§¹ Linting..."
npm run lint
LINT=$?

if [ $LINT -ne 0 ]; then
  echo "âŒ Linting failed. Fix lint errors before committing."
  exit 1
fi
echo "âœ… Lint check passed"

# Run tests
echo ""
echo "ğŸ§ª Running tests..."
npx jest --passWithNoTests --bail
TEST=$?

if [ $TEST -ne 0 ]; then
  echo "âŒ Tests failed. Fix failing tests before committing."
  exit 1
fi
echo "âœ… Tests passed"

# Run lint-staged for staged files
echo ""
echo "âœ¨ Formatting staged files..."
npx lint-staged
STAGED=$?

if [ $STAGED -ne 0 ]; then
  echo "âŒ Formatting failed."
  exit 1
fi

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… All pre-commit checks passed! Ready to commit."
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
